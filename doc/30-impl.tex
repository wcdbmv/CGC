\chapter{Технологический раздел}

\section{Выбор языка программирования и среды разработки}

В качестве языка программирования для реализации данной курсовой работы был выбран высокопроизводительный язык C++ \cite{cpp17}.
Этот язык поддерживает объектно-ориентированную модель разработки, что позволяет четко структурировать программу и легко модифицировать отдельные ее компоненты независимо от других.
Язык C++ позволяет эффективно использовать ресурсы системы благодаря широкому набору функций и классов из стандартной библиотеки.

В качестве среды разработки был использован Qt Creator 4.10.2.
Он обладает всем необходимым функционалом для написания, профилирования и отладки программ и создания графического пользовательского интерфейса. Данная среда поставляется вместе с фреймворком Qt 5.13.2 [6], классы и функции которого также были использованы при написании данного курсового проекта.

\section{Структура программы}

Структура  программы  представлена  на  рисунке \ref{img:idef} в виде схемы последовательных преобразований.

\img{30mm}{idef}{Последовательность преобразований}

\subsection{Применение паттернов проектирования}

Для структуры программы был выбран шаблон Model-View-Controller (MVC) \cite{Gamma}, состоящий из трех отдельных компонентов: модели(model), которая предоставляет  данные  и  реагирует  на  команды контроллера, изменяя своё состояние; представления (view), отвечающего за отображения данных модели; контроллера (controller), интерпретирующего действия пользователя, оповещая модель о необходимости внести изменения.

\subsection{Схема классов}

На рисунке \ref{img:uml} представлена схема классов.

\img{145mm}{uml}{Диаграмма классов программы}

Классы \code{SolidRender} и \code{DrawLabel} входят в состав представления шаблона MVC, класс \code{Controller} — в состав контроллера, оставшиеся классы — в состав модели. 

Разработанная программа состоит из следующих классов:
\begin{itemize}
	\item Базовые математические классы: \begin{itemize}
		\item \code{RectangularMatrix} — класс прямоугольных матриц;
		\item \code{Matrix} — класс квадратных матриц;
		\item \code{Matrix4x4} — класс матриц $4\times4$;
		\item \code{Vector} — класс векторов;
		\item \code{Vector3D} — класс векторов трёхмерных пространств;
		\item \code{HomogeniusVector3D} — класс однородных векторов трёхмерных пространств;
	\end{itemize}

	\item Классы для работы с моделями: \begin{itemize}
		\item \code{Vertex} — класс вершин;
		\item \code{Face} — класс примитивных поверхностей;
		\item \code{TriangleFace} — класс треугольных примитивных поверхностей;
		\item \code{Mesh} — Единица полигональной сетки.
	\end{itemize}

	\item Классы сцены: \begin{itemize}
		\item \code{Camera} — класс камеры с возможностью перемещения по сцене;
		\item \code{Model} — класс аппроксимированной поверхности функции;
	\end{itemize}

	\item Классы работы с изображением: \begin{itemize}
		\item \code{Scene} — класс сцены, необходимой для визуализации;
		\item \code{SolidRenderer} — класс для генерации изображения;
		\item \code{Model} — класс для вывода изображения;
	\end{itemize}

	\item Классы интерфейса: \begin{itemize}
		\item \code{Controller} — класс контроллера;
		\item \code{MainWindow} — класс главного окна сцены.
	\end{itemize}
	
\end{itemize}

\section{Интерфейс программы}

Интерфейс программы был разработан с использованием редактора графического интерфейса Qt Designer.
Главное окно программы можно условно разбить на две области: область настройки поверхностей и область изображения.

\img{100mm}{screen1}{Интерфейс программы при ее запуске}

Для создания поверхности пользователю необходимо ввести функцию от двух переменных в список всех функций.
Парсер математических выражений поддерживает все элементарные функции и распространённые константы.
Чтобы добавить ещё одну функцию, необходимо нажать на кнопку \code{Append}.
Для изменения цвета поверхности функции её необходимо выделить и, нажав на кнопку \code{Change color}, в диалоге выбора цвета выбрать наиболее подходящий.
В списке можно выбрать произвольное количество функций.
После нажатия на кнопку \code{Plot} поверхности всех выбранных функций появятся на экране.
Используя мышь, можно перемещать камеру: колёсико мыши отвечает за приближение и отдаление картинки, левая кнопка — за вращение.
С помощью кнопки \code{Remove} можно удалить выбранные функции, а нажатие на кнопку \code{Clear all} возвратит все настройки программы к исходному виду.
В левом верхнем виджете можно выбрать начальные и конечные значения $x$ и $y$, а также их шаг.

\img{100mm}{screen2}{Интерфейс программы при установленной скорости моделирования}

\section{Отладка и тестирование программы}

Для отладки программы применялся отладчик gdb и библиотека QDebug, входящая в состав Qt, которая позволила выводить необходимую отладочную информацию в консоль во время выполнения программы.
В качестве инструмента для анализа кода программы использовался статический анализатор ClangStatic Analyzer \cite{clang}, который позволил на раннем этапе разработки обнаружить некоторые недочеты программного кода.
Применяемый стандарт языка C++ не содержит средств для автоматической сборки мусора, то есть очистки динамически выделенной памяти, поэтому для контроля за динамически выделяемой памятью использовалась программа Valgrind \cite{valgrind}.

\section*{Вывод}

Правильный выбор инструментов разработки позволил эффективно реализовать алгоритмы, проводить отладку и тестирование программы, и выполнить исследовательский раздел курсовой работы.
